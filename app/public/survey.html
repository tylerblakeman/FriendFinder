<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.css">
</head>
<body>
    
    <!--Navigation/Nav-bar-->
    <nav class = "purple darken-4">
      <div class="container">
          <div class="navbar-fixed">
              <div class="nav-wrapper halign-wrapper">
                  <a href="./survey" class="brand-logo">ADHD Friend Finder</a>
                  <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                  <ul class="right hide-on-med-and-down">
                      <li><a href="./survey">Survey</a></li>
                      <li><a href="./friendsapi">API</a></li>
                      <li><a href="https://github.com/tylerblakeman/FriendFinder" class="">Github Repository</a></li>
                  </ul>
              </div>
          </div>
          </nav>
          <!--Sidebar Nav-->
          <ul class="sidenav" id="mobile-demo">
              <li><a href="./survey">Survey</a></li>
              <li><a href="./friendsapi">API</a></li>
              <li><a href="https://github.com/tylerblakeman/FriendFinder">Github Repository</a></li>
          </ul>
      </div>
        


    
 
  <div class="container section">
    <!--form-->
      <div class="row col s12">
        <form class="col s12">
          <div class="row">
            <div class="input-field col s6">
              <input placeholder="First & Last Name" id="name" type="text" class="validate">
              <label for="full_name">First & Last Name</label>
            </div>
            <div class="input-field col s6">
              <input placeholder="URL" id="photo_URL" type="text" class="validate">
              <label for="photo_URL">Photo URL</label>
            </div>
          </div>
        </form>
      </div>

    <!-- questions -->
    <!-- Question 1 -->
      <hr>
      <div class="row col s12">
        <div class="flow-text">
          1. How often do you have trouble wrapping up the final details of a project,
          once the challenging parts have been done?
        </div>
      <div class="input-field col s6 m12" id="input-field">
          <select>
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="3">4</option>
            <option value="3">5</option>
          </select>
          <label>1: Never — 5: Very Often</label>
      </div>
      </div>
    <!-- Question 2 -->
      <div class="row col s12">
        <div class="flow-text">
          2. How often do you have difficulty getting things in order when you have to do
          a task that requires organization?
        </div>
      <div class="input-field col s6 m12" id="input-field">
          <select>
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="3">4</option>
            <option value="3">5</option>
          </select>
          <label>1: Never — 5: Very Often</label>
        </div>
      </div>            

    <!-- Question 3 -->
      <div class="row">
        <div class="flow-text">
          3. How often do you have problems remembering appointments or obligations?
        </div>
      <div class="input-field col s6 m12" id="input-field">
          <select>
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="3">4</option>
            <option value="3">5</option>
          </select>
          <label>1: Never — 5: Very Often</label>
        </div>
      </div>  


    <!-- Question 4 -->
      <div class="row">
        <div class="flow-text">
          4. When you have a task that requires a lot of thought, how often do you avoid
          or delay getting started?
        </div>
      <div class="input-field col s6 m12" id="input-field">
          <select>
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="3">4</option>
            <option value="3">5</option>
          </select>
          <label>1: Never — 5: Very Often</label>
        </div>
      </div>  


  <!-- Question 5 -->
      <div class="row">
        <div class="flow-text">
          5. How often do you fidget or squirm with your hands or feet when you have
          to sit down for a long time?
        </div>
      <div class="input-field col s6 m12" id="input-field">
          <select>
            <option value="" disabled selected>Choose your option</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="3">4</option>
            <option value="3">5</option>
          </select>
          <label>1: Never — 5: Very Often</label>
        </div>
      </div>


  <!-- Question 6 -->
      <div class="row">
        <div class="flow-text">
          6. How often do you feel overly active and compelled to do things, like you
          were driven by a motor?
        </div>
      <div class="input-field col s6 m12" id="input-field">
        <select>
          <option value="" disabled selected>Choose your option</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <label>1: Never — 5: Very Often</label>
      </div>
      </div>


  <!-- Question 7 -->

      <div class="row">
        <div class="flow-text">
          7. How often do you make careless mistakes when you have to work on a boring or
          difficult project?
        </div>
      <div class="input-field col s6 m12" id="input-field">
        <select>
          <option value="" disabled selected>Choose your option</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <label>1: Never — 5: Very Often</label>
      </div>
      </div>

  <!-- Question 8 -->
      <div class="row">
        <div class="flow-text">
          8. How often do you have difficulty keeping your attention when you are doing boring
          or repetitive work? 
        </div>
      <div class="input-field col s6 m12" id="input-field">
        <select>
          <option value="" disabled selected>Choose your option</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
        <label>1: Never — 5: Very Often 1= Never - 5 = Very Often</label>
      </div>
      </div>


  <!-- Question  9 -->
      <div class="row col s12">
        <div class="flow-text">
          9. How often do you have difficulty concentrating on what people say to you,
          even when they are speaking to you directly?
        </div>
        
      <div class="input-field col s6 m12" id="input-field">
        <select>
          <option value="" disabled selected>Choose your option</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="3">4</option>
          <option value="3">5</option>
        </select>
        <label>1: Never — 5: Very Often</label>
      </div>


  <!-- Question 10 -->
      <div class="row col s12">
        <div class="flow-text">
          10. How often do you misplace or have difficulty finding things at home or at work?
        </div>
      <div class="input-field col s6 m12">
        <select>
          <option value="" disabled selected>Choose your option</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="3">4</option>
          <option value="3">5</option>
        </select>
        <label class="form-input">1: Never — 5: Very Often</label>
      </div>
    </div>

    </div>
    <!-- Submit Button-->
    <a data-target="modal" class="submit waves-effect  purple darken-4 waves btn-large modal-trigger">Submit</a>

    <!--Empty Modal-->
    <div id="modal" class="modal container">
      <div class="modal-content">
        <h4 id="modal-title"></h4>
      <img id="friend-image" class="responsive-img" src="">
        <p id = "modal-text"></p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close btn white-text waves-effect waves-purple purple darken-4 btn-flat">Okay</a>
      </div>
    </div>


  </div>
</div>

<!--Jquery-->
<script
  src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous">
</script>

<!-- Materialize  -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.js"></script>
<script>
    // this is the materialize js for getting the drop down menus to work
      document.addEventListener('DOMContentLoaded', function() {

    var elems = document.querySelectorAll('select');
    var instances = M.FormSelect.init(elems);
    var instance = M.FormSelect.getInstance("input-field");
  });
  //this is materialize js for getting the modal trigger to work on the submit button
  document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.modal');
    var instances = M.Modal.init(elems);        
  });

  <!--Navbar Initialization-->
    document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('.sidenav');
    var instances = M.Sidenav.init(elems);
    });
 
</script>
  <script>
  $(".submit").on("click", function(event) {
    event.preventDefault();
    console.log
    if ($(".input-field option:selected").text().includes("Choose") || $("#name") == "" || $("#photo_URL") == "") {
      $('#modal-title').text("There was an error with your input")
      $('#modal-text').text("Fill out the damn form!")
      return;
    }
    else if ($("#photo_URL").val().includes("http://") == false && $("#photo_URL").val().includes("https://") == false && $("#photo_URL").val().includes("www.") == false) {
    $('#modal-title').text("There was an error with your input");
    $('#modal-text').text("Your photo URL is not valid");
    return;
    }
    else {
      //collecting the different scores the user filled out
      var scoresArray = [];
      var scores = $(".input-field option:selected").text().split("");
      scores.forEach(element => {
        scoresArray.push(Number(element));
      });
      var newUser = {
          name: $("#name").val(),
          photo: $("#photo_URL").val(),
          scores: scoresArray
      }
      console.log(newUser);
      $.post("/apiroutes", newUser, function(data){
        if (data) {
          console.log(`this is your new friend${data.matchedFriend}`)
          $('#modal-title').text("Your New Friend");
          $('#modal-text').text(data.matchedFriend);
          $('#friend-image').attr("src", data.matchedPhoto)
          // alert(data.matchedPhoto)
        }
        else{
          console.log("Nope")
        }
      })
    }




  
  });
  </script>

</body>
</html>